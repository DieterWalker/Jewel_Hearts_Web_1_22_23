var products = [
    // Earring
    {
        nameProduct: "Balenciaga Gold Loop Heart Earrings",
        id: 1,
        price: 1500000,
        description: "description",
        category: "Earring",
        brand: "Harry Winston",
        image: "Earring_01.jpg",
    },
    {
        nameProduct: "Blue Drop Earrings",
        id: 2,
        price: 2400000,
        description: "description",
        category: "Earring",
        brand: "THAYA",
        image: "Earring_02.jpg ",
    },
    {
        nameProduct: "Bridal Drop Earrings",
        id: 3,
        price: 2000000,
        description: "description",
        category: "Earring",
        brand: "LEKANI",
        image: "Earring_03.jpg ",
    },
    {
        nameProduct: "Floral Diamond Stud Earrings",
        id: 4,
        price: 3650000,
        description: "description",
        category: "Earring",
        brand: "Harry Winston",
        image: "Earring_04.jpg ",
    },
    {
        nameProduct: "Memoir Gold Plated Basket Earring",
        id: 5,
        price: 2400000,
        description: "description",
        category: "Earring",
        brand: "Harry Winston",
        image: "Earring_05.jpg ",
    },
    {
        nameProduct: "Gold Thick Hoop Earring",
        id: 6,
        price: 1700000,
        description: "description",
        category: "Earring",
        brand: "Graff",
        image: "Earring_06.jpeg ",
    },
    {
        nameProduct: "Gold Plated Small Earrings",
        id: 7,
        price: 1900000,
        description: "description",
        category: "Earring",
        brand: "Chopard",
        image: "Earring_07.jpg ",
    },
    {
        nameProduct: "Olive Leaf Earrings",
        id: 8,
        price: 1400000,
        description: "description",
        category: "Earring",
        brand: "Tiffany & Co",
        image: "Earring_08.jpg ",
    },
    {
        nameProduct: "Swarovski Qcean Blue Heart Earring",
        id: 9,
        price: 3000000,
        description: "description",
        category: "Earring",
        brand: "LEKANI",
        image: "Earring_09.jpg ",
    },
    {
        nameProduct: "Small Ball Stud Earrings",
        id: 10,
        price: 1600000,
        description: "description",
        category: "Earring",
        brand: "David Yurman",
        image: "Earring_10.jpeg ",
    },
    {
        nameProduct: "Sitashi Gold with Cubic Zirconia Drop Earrings",
        id: 11,
        price: 2600000,
        description: "description",
        category: "Earring",
        brand: "Bvlgari",
        image: "Earring_11.jpg ",
    },
    // Necklace
    {
        nameProduct: "Aurora Pendant Halo Crystal Necklace",
        id: 12,
        price: 3000000,
        description: "description",
        category: "Necklace",
        brand: "LEKANI",
        image: "Necklace_01.jpg",
    },
    {
        nameProduct: "Iconic Swan Necklace",
        id: 13,
        price: 4500000,
        description: "description",
        category: "Necklace",
        brand: "Chopard",
        image: "Necklace_02.jpg",
    },
    {
        nameProduct: "Jewelry Crescent Pendant Moon Necklace",
        id: 14,
        price: 3700000,
        description: "description",
        category: "Necklace",
        brand: "LEKANI",
        image: "Necklace_03.jpg",
    },
    {
        nameProduct: "Platinum Natural Diamond Solitaire Pendant Necklace",
        id: 15,
        price: 4600000,
        description: "description",
        category: "Necklace",
        brand: "THAYA",
        image: "Necklace_04.jpg",
    },
    {
        nameProduct: "Double Layer Choker Necklance",
        id: 16,
        price: 3100000,
        description: "description",
        category: "Necklace",
        brand: "Chopard",
        image: "Necklace_05.jpg",
    },
    {
        nameProduct: "Sliver Butterfly Pendant Chain Necklace",
        id: 17,
        price: 2800000,
        description: "description",
        category: "Necklace",
        brand: "Buccellati",
        image: "Necklace_06.jpg",
    },
    {
        nameProduct: "Midsummer Night's Dream Design Necklace",
        id: 18,
        price: 4200000,
        description: "description",
        category: "Necklace",
        brand: "THAYA",
        image: "Necklace_07.jpg",
    },
    {
        nameProduct: "Sterling Sliver Infinity Pendant Chain Necklace",
        id: 19,
        price: 3700000,
        description: "description",
        category: "Necklace",
        brand: "Graff",
        image: "Necklace_08.jpg",
    },
    {
        nameProduct: "White Gold Heart Shaped Sky-Blue Topaz and Diamond Necklace",
        id: 20,
        price: 4400000,
        description: "description",
        category: "Necklace",
        brand: "Tiffany & Co",
        image: "Necklace_09.jpg",
    },
    //Ring
    {
        nameProduct: "Diamond Engagement Ring",
        id: 21,
        price: 1150000,
        description: "description",
        category: "Ring",
        brand: "Tiffany & Co",
        image: "Ring_01.jpg",
    },
    {
        nameProduct: "Goddesslili Black Diamond Ring",
        id: 22,
        price: 2950000,
        description: "description",
        category: "Ring",
        brand: "LEKANI",
        image: "Ring_02.jpg",
    },
    {
        nameProduct: "Ziron Diamond Ring",
        id: 23,
        price: 2450000,
        description: "description",
        category: "Ring",
        brand: "THAYA",
        image: "Ring_03.png",
    },
    {
        nameProduct: "Swarovski Women's Ring Stainless Steel Crystal",
        id: 24,
        price: 1750000,
        description: "description",
        category: "Ring",
        brand: "Graff",
        image: "Ring_06.jpg",
    },
    {
        nameProduct: "Simple Heart Ring",
        id: 25,
        price: 1600000,
        description: "description",
        category: "Ring",
        brand: "Chopard",
        image: "Ring_07.jpg",
    },

    //Bracelet
    {
        nameProduct: "Stain less Steel Bracelets",
        id: 26,
        price: 2400000,
        description: "description",
        category: "Bracelet",
        brand: "LEKANI",
        image: "Bracelet_01.jpg",
    },
    {
        nameProduct: "Stainless Steel Love Heart Charm Bracelets",
        id: 27,
        price: 2200000,
        description: "description",
        category: "Bracelet",
        brand: "Chopard",
        image: "Bracelet_02.jpg",
    },
    {
        nameProduct: "Luxury Mermaid Tail Crystal Beaded Bracelet",
        id: 28,
        price: 2150000,
        description: "description",
        category: "Bracelet",
        brand: "THAYA",
        image: "Bracelet_03.jpg",
    },
    {
        nameProduct: "Luxury Crystal Bracelet",
        id: 29,
        price: 1150000,
        description: "description",
        category: "Bracelet",
        brand: "Bvlgari",
        image: "Bracelet_04.jpg",
    },
    {
        nameProduct: "Mahi Crystal Black White Elephant Bracelet",
        id: 30,
        price: 2250000,
        description: "description",
        category: "Bracelet",
        brand: "Chopard",
        image: "Bracelet_05.jpg",
    },
    {
        nameProduct: "Sterling Sliver Link Bracelet",
        id: 31,
        price: 1550000,
        description: "description",
        category: "Bracelet",
        brand: "Gucci",
        image: "Bracelet_06.jpg",
    },
    {
        nameProduct: "Gold Charm Bracelet",
        id: 32,
        price: 1700000,
        description: "description",
        category: "Bracelet",
        brand: "Tiffany & Co",
        image: "Bracelet_07.png",
    },
    {
        nameProduct: "Crystal Lady Charm Bracelet",
        id: 33,
        price: 1650000,
        description: "description",
        category: "Bracelet",
        brand: "THAYA",
        image: "Bracelet_08.jpg",
    },
    {
        nameProduct: "Copper Crytal Bangle Gemstone Bracelet",
        id: 34,
        price: 1950000,
        description: "description",
        category: "Bracelet",
        brand: "Chopard",
        image: "Bracelet_09.jpg",
    },
]

// Reset input
function resetInput() {
    document.getElementById("id").value = ""
    document.getElementById("name").value = ""
    // document.getElementById("upload").files[0].name = ""
    document.getElementById("category").value = ""
    document.getElementById("brand").value = ""
    document.getElementById("price").value = ""
}


// Ki·ªÉm tra input 
function validateInput() {
    let formElement = document.querySelector(".themsp")
    let inputElement = formElement.querySelectorAll(".form-input")
    for (let i = 0; i < inputElement.length; i++) { //Duy·ªát t·ª´ng ph·∫ßn t·ª≠ input
        if (inputElement[i].value == "") { // Ki·ªÉm tra ƒë·∫ßu v√†o r·ªóng
            // G√°n text cho m·ªçi input
            inputElement[i].parentElement.querySelector(".error-message").innerText = `Please enter your ${inputElement[i].id}`
        } else {
            inputElement[i].parentElement.querySelector(".error-message").innerText = ""
        }
    }
}

//Th√™m
function Add() {
    validateInput();
    let formElement = document.querySelector(".themsp")
    let errorElement = formElement.querySelectorAll(".error-message")
    let arrErrorElement = []
    for (let i = 0; i < errorElement.length; i++) {
        arrErrorElement.push(errorElement[i].innerText)
    }
    // H√†m every ki·ªÉm tra  t·∫•t c·∫£ c√°c input n·∫øu c√≥ 1 input sai -> false
    // N·∫øu h√†m tr·∫£ v·ªÅ gi√° tr·ªã value === r·ªóng -> true , nguoc lai
    let checkErrorElement = arrErrorElement.every(value => value === "") 
    if (checkErrorElement) { //true
        //Save data
        let id = document.getElementById("id").value
        let name = document.getElementById("name").value
        let img = document.getElementById("upload").files[0].name
        let category = document.getElementById("category").value
        let brand = document.getElementById("brand").value
        let price = document.getElementById("price").value
        // kiem tra trong localStorage co key la list-product hay chua (toan tu 3 ngoi)
        // Neu co lay ra , giai ma them tiep vao
        // Neu chua them mot mang moi
        //listProduct = []
        let listProduct = localStorage.getItem("list-product") ? JSON.parse(localStorage.getItem("list-product")) : []
        listProduct.push({
            id: id,
            nameProduct: name,
            image: img,
            category:category,
            brand: brand,
            price: price
        })

        //ƒê·∫©y d·ªØ li·ªáu v√†o  localStorage v·ªõi key = "list-product"
        // JSON.stringify(listProduct) c√≥ t√°c d·ª•ng m√£ h√≥a
        localStorage.setItem("list-product", JSON.stringify(listProduct))
        // console.log(listProduct)
        renderProduct()
        resetInput()
    }

}

//ƒê·∫©y s·∫£n ph·∫©m
function renderProduct() {
    //Ki·ªÉm tra  localStorage
    let listProduct = localStorage.getItem("list-product") ? JSON.parse(localStorage.getItem("list-product")) : []
    
    //T·∫°o bi·∫øn ƒë·ªÉ ch·ª©a table
    let product = `
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Img</th>
            <th>Category</th>
            <th>Brand</th>
            <th>Price</th>
            <th>Action</th>
        </tr>`

    listProduct.map((value, index) => {
        product += `<tr>
                        <td>${index + 1}</td>
                        <td>${value.nameProduct}</td>
                        <td> <img class="img-admin" src="./img/${value.image}" alt=""></td>
                        <td>${value.category}</td>
                        <td>${value.brand}</td>
                        <td>${value.price} VND</td>
                        <td>
                        <input class="action" type="button" name="btn-edit" id="editsp" value="‚úè" onClick="EditProduct(${index})" >
                        <input class="action" type="button" name="btn-delete" id="deletesp" value="üóë" onClick="DeleteProduct(${index})" >
                        </td>
                    </tr>` 
    })
    // document.getElementById("table-sp").innerHTML = product;
    // renderProduct();
    const tableProduct = document.querySelector("#table-sp");
    let iProduct = product;
    tableProduct.innerHTML = iProduct;
    // console.log(tableProduct);
}

// H√†m t·∫°o ·∫©n hi·ªán cho form th√™m s·∫£n ph·∫©m 
function formthemsp(){
    document.getElementById("t-themsp").style.display = "block";
}

function dongthemsp(){
    document.getElementById("t-themsp").style.display = "none";
    document.getElementById("save").style.display = "block" // ·∫®n n√∫t th√™m
    document.getElementById("update").style.display = "none" // ·∫®n n√∫t th√™m
    resetInput()
}

function mothemsp(){
    document.getElementById("t-themsp").style.display = "block"
}
function dong_sua_user(){
    document.getElementById("form-user").style.display = "none"
}

function mo_sua_user(){
    document.getElementById("form-user").style.display = "block"
}

function dong_invoice(){
    document.getElementById("form-invoice").style.display = "none"
}
function mo_invoice(){
    document.getElementById("form-invoice").style.display = "block"
}
// S·ª≠a
function EditProduct(index) {
    let listProduct = localStorage.getItem("list-product") ? JSON.parse(localStorage.getItem("list-product")) : []
    mothemsp();
    // console.log(index)
    //L·∫•y d·ªØ li·ªáu t·ª´ localStorage cho hi·ªÉn th·ªã tr√™n form
    document.getElementById("name").value = listProduct[index].nameProduct
    document.getElementById("id").value = index
    document.getElementById("upload").files[index] = listProduct[index].image
    document.getElementById("category").value = listProduct[index].category
    document.getElementById("brand").value = listProduct[index].brand
    document.getElementById("price").value = listProduct[index].price
    document.getElementById("receiveindex").value = index


    document.getElementById("save").style.display = "none" // ·∫®n n√∫t th√™m
    document.getElementById("update").style.display = "inline-block" //Hi·ªán n√∫t update

}

// H√†m thay ƒë·ªïi d·ªØ li·ªáu s·∫£n ph·∫©m 
function changeProduct() {
    let listProduct = localStorage.getItem("list-product") ? JSON.parse(localStorage.getItem("list-product")) : []
    let receiveindex = document.getElementById("receiveindex").value

    //C·∫≠p nh·∫≠t d·ªØ li·ªáu
    listProduct[receiveindex]={
        nameProduct: document.getElementById("name").value,
        image: document.getElementById("upload").files[0].name,
        category: document.getElementById("category").value,
        brand: document.getElementById("brand").value,
        price: document.getElementById("price").value     
    }

     // ƒê·∫©y d·ªØ li·ªáu v√†o  localStorage
     localStorage.setItem("list-product",JSON.stringify(listProduct))
     document.getElementById("save").style.display = "inline-block" 
     document.getElementById("update").style.display = "none" 
     renderProduct()
     resetInput()
     
}

// X√≥a
function DeleteProduct(index) {
    // console.log(index)
    let listProduct = localStorage.getItem("list-product") ? JSON.parse(localStorage.getItem("list-product")) : []
    let choice = confirm("B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a ?")
        if(choice == true){
            listProduct.splice(index,1) // V·ªõi index l√† gi√° tr·ªã l∆∞u tr·ªØ hay v√† b·∫Øt ƒë·∫ßu , 1 l√† s·ªë ph·∫ßn t·ª≠ b·ªã x√≥a t√≠nh t·ª´ index
            localStorage.setItem("list-product",JSON.stringify(listProduct))
            renderProduct()
        }else{
            alert("ƒê√£ h·ªßy x√≥a s·∫£n ph·∫©m !");
        }
}

// Hi·ªÉn th·ªã h√¨nh ·∫£nh tr∆∞·ªõc khi th√™m
        function ImagesFileAsURL() {
            var fileSelected = document.getElementById('upload').files
            if(fileSelected.length > 0){
                var fileToLoad = fileSelected[0];
                var fileReader = new FileReader();
                fileReader.onload = function(fileLoaderEvent){
                    var srcData = fileLoaderEvent.target.result;
                    var newImage = document.createElement('img');
                    newImage.src = srcData;
                    document.getElementById('displayImg').innerHTML = newImage.outerHTML;
                }
                fileReader.readAsDataURL(fileToLoad);
            }
        }

// var userArray = [
//     {id:1,username:'Khoa',gmail:'khoa@gmail.com',phone:'01214686982',password:'abc123'},
//     {id:2,username:'Khanh',gmail:'khanh@gmail.com',phone:'01214686982',password:'abc123'},
//     {id:3,username:'Cong',gmail:'cong@gmail.com',phone:'01214686982',password:'abc123'},
//     {id:4,username:'Thinh',gmail:'thinh@gmail.com',phone:'01214686982',password:'abc123'},
//     {id:5,username:'Dat',gmail:'dat@gmail.com',phone:'01214686982',password:'abc123'},
// ]
// localStorage.setItem("userArray", JSON.stringify(userArray))

function userCustomer(){
    listUser = localStorage.getItem("userArray") ? JSON.parse(localStorage.getItem("userArray")) : []
    let user = `
        <tr>
            <th>id</th>
            <th>Username</th>
            <th>Gmail</th>
            <th>Sdt</th>
            <th>Password</th>
            <th>Action</th>
        </tr>`

    listUser.map((value,index)=>{
        user += `<tr>
                            <td>${index + 1}</td>
                            <td>${value.username}</td>
                            <td>${value.gmail}</td>
                            <td>${value.phone}</td>
                            <td>${value.password} </td>
                            <td>
                                <input class="action" type="button" name="btn-edituser" id="editur" value="‚úè" onClick="EditUser(${index})" >
                                <input class="action" type="button" name="btn-deleteuser" id="deleteur" value="üóë" onClick="DeleteUser(${index})" >
                            </td>
                        </tr>` 
    }); 
    // document.querySelector("table-qlur").innerHTML = user    
    // userCustomer()       
    let tableUser = document.querySelector("#table-qlur");
    // console.log(tableUser);
    let test = user;
    // console.log(test);
    tableUser.innerHTML = test;   
}

function EditUser(index){
    //ki·ªÉm tra localstorage
    let listUser = localStorage.getItem("userArray") ? JSON.parse(localStorage.getItem("userArray")) : []
    mo_sua_user()

    //L·∫•y d·ªØ li·ªáu hi·ªÉn th·ªã tr√™n form 
    document.getElementById("id-ur").value = index
    document.getElementById("name-ur").value = listUser[index].username
    document.getElementById("gmail").value = listUser[index].gmail
    document.getElementById("phone").value = listUser[index].phone
    document.getElementById("password").value = listUser[index].password
    document.getElementById("userindex").value = index
}

function changeUser(){
    let listUser = localStorage.getItem("userArray") ? JSON.parse(localStorage.getItem("userArray")) : []
    let userIndex = document.getElementById("userindex").value

    //C·∫≠p nh·∫≠t d·ªØ li·ªáu 
    listUser[userIndex]={
        username:document.getElementById("name-ur").value,
        gmail:document.getElementById("gmail").value,
        phone:document.getElementById("phone").value,
        password:document.getElementById("password").value
    }
    //ƒê·∫©y d·ªØ li·ªáu v√†o localStorage
    localStorage.setItem("userArray",JSON.stringify(listUser));
    userCustomer()
}

function DeleteUser(index){
    // console.log(index);
    listUser = localStorage.getItem("userArray") ? JSON.parse(localStorage.getItem("userArray")) : []
    let choice = confirm("B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a?")
    if (choice == true){
        listUser.splice(index,1)
        localStorage.setItem("userArray",JSON.stringify(listUser))
        userCustomer()
    }else{
        alert("B·∫°n h·ªßy x√≥a!")
    }
}

var invoiceArray = [
    {id:1,idInvoice:84132,idCustomer:1,nameCustomer:'Khoa',tongtien:'2500000',gmail:'khoa@gmail.com',sdt:'01214686982',address:'vietnam',ngaydat:'2022-11-19',status:'chua xu ly',
    giohang:[
        {
            nameProduct: "Balenciaga Gold Loop Heart Earrings",
            id: 1,
            price: 1500000,
            description: "description",
            category: "Earring",
            brand: "Harry Winston",
            image: "Earring_01.jpg",
        },
        {
            nameProduct: "Blue Drop Earrings",
            id: 2,
            price: 2400000,
            description: "description",
            category: "Earring",
            brand: "THAYA",
            image: "Earring_02.jpg ",
        }
    ]},
    {id:2,idInvoice:84142,idCustomer:2,nameCustomer:'Thinh',tongtien:'3000000',gmail:'k@gmail.com',sdt:'01214686982',address:'vietnam',ngaydat:'2022-11-19',status:'chua xu ly',
    giohang:[
        {
            nameProduct: "Balenciaga Gold Loop Heart Earrings",
            id: 1,
            price: 1500000,
            description: "description",
            category: "Earring",
            brand: "Harry Winston",
            image: "Earring_01.jpg",
        },
        {
            nameProduct: "Blue Drop Earrings",
            id: 2,
            price: 2400000,
            description: "description",
            category: "Earring",
            brand: "THAYA",
            image: "Earring_02.jpg ",
        }
    ]},
    {id:3,idInvoice:84152,idCustomer:3,nameCustomer:'Cong',tongtien:'8000000',gmail:'ioa@gmail.com',sdt:'01214686982',address:'vietnam',ngaydat:'2022-11-19',status:'ƒê√£ x·ª≠ l√Ω'
    ,giohang:[
        {
            nameProduct: "Balenciaga Gold Loop Heart Earrings",
            id: 1,
            price: 1500000,
            description: "description",
            category: "Earring",
            brand: "Harry Winston",
            image: "Earring_01.jpg",
        },
        {
            nameProduct: "Blue Drop Earrings",
            id: 2,
            price: 2400000,
            description: "description",
            category: "Earring",
            brand: "THAYA",
            image: "Earring_02.jpg ",
        },
        {
            nameProduct: "Gold Charm Bracelet",
            id: 32,
            price: 1700000,
            description: "description",
            category: "Bracelet",
            brand: "Tiffany & Co",
            image: "Bracelet_07.png",
        },
        {
            nameProduct: "Crystal Lady Charm Bracelet",
            id: 33,
            price: 1650000,
            description: "description",
            category: "Bracelet",
            brand: "THAYA",
            image: "Bracelet_08.jpg",
        }
    ]},
    {id:4,idInvoice:84162,idCustomer:4,nameCustomer:'Dat',tongtien:'10000000',gmail:'koaad@gmail.com',sdt:'01214686982',address:'vietnam',ngaydat:'2022-11-19',status:'chua xu ly'
    ,giohang:[
        {
            nameProduct: "Balenciaga Gold Loop Heart Earrings",
            id: 1,
            price: 1500000,
            description: "description",
            category: "Earring",
            brand: "Harry Winston",
            image: "Earring_01.jpg",
        },
        {
            nameProduct: "Blue Drop Earrings",
            id: 2,
            price: 2400000,
            description: "description",
            category: "Earring",
            brand: "THAYA",
            image: "Earring_02.jpg ",
        }
    ]}
]
//localStorage.setItem("invoice-Array", JSON.stringify(invoiceArray))

function invoiceCustomer(){
    listinvoice = localStorage.getItem("invoice-Array") ? JSON.parse(localStorage.getItem("invoice-Array")) : []
    let invoice = `
        <tr>
            <th>ID</th>
            <th>idInvoice</th>
            <th>idCustomer</th>
            <th>Name</th>
            <th>Date</th>
            <th>Total Price</th>
            <th>Status</th>
            <th>Action</th>
        </tr>`

        listinvoice.map((value,index)=>{
        invoice += `<tr>
                            <td>${index + 1}</td>
                            <td>${value.idInvoice}</td>
                            <td>${value.idCustomer}</td>
                            <td>${value.nameCustomer}</td>
                            <td>${value.ngaydat}</td>
                            <td>${value.tongtien} VND</td>
                            <td>${value.status}</td>
                            <td>
                                <input class="action" type="button" name="btn-detail" id="detailinvoice" value="üîº" onClick="detailInvoice(${index})" >
                            </td>
                        </tr>` 
    }); 
    // document.querySelector("table-qlur").innerHTML = user    
    // userCustomer()       
    let tableInvoice = document.querySelector("#table-qldh");
    // console.log(tableInvoice);
    let test = invoice;
    // console.log(test);
    tableInvoice.innerHTML = test;   
}

function detailInvoice(index){
    // Ki·ªÉm tra localStorage
    // console.log(index);
    listinvoice = localStorage.getItem("invoice-Array")?JSON.parse(localStorage.getItem("invoice-Array")) : []
    mo_invoice()
    
    // L·∫•y d·ªØ li·ªáu tr√™n form
    document.getElementById("id-invoice").value = listinvoice[index].idInvoice
    document.getElementById("id-customer").value = listinvoice[index].idCustomer
    document.getElementById("name-customer").value = listinvoice[index].nameCustomer
    document.getElementById("date-invoice").value = listinvoice[index].ngaydat
    document.getElementById("price").value = listinvoice[index].tongtien
    document.getElementById("address").value = listinvoice[index].address
    document.getElementById("gmail").value = listinvoice[index].gmail
    document.getElementById("sdt").value = listinvoice[index].sdt
    document.getElementById("select-status").value = listinvoice[index].status
    document.getElementById("invoiceindex").value = index

    //L·∫•y d·ªØ li·ªáu gi·ªè h√†ng
    let cart = `
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Img</th>
            <th>Category</th>
            <th>Brand</th>
            <th>Price</th>
        </tr>`

    listinvoice[index].giohang.map((value, index) => {
        cart += `<tr>
                        <td>${index + 1}</td>
                        <td>${value.nameProduct}</td>
                        <td> <img class="img-admin" src="./img/${value.image}" alt=""></td>
                        <td>${value.category}</td>
                        <td>${value.brand}</td>
                        <td>${value.price} VND</td>
                    </tr>` 
    })
    // document.getElementById("table-sp").innerHTML = product;
    // renderProduct();
    const tableCart = document.querySelector("#table-detail");
    tableCart.innerHTML = cart;
}

function changeInvoice(){
    listinvoice = localStorage.getItem("invoice-Array")?JSON.parse(localStorage.getItem("invoice-Array")) : []
    invoiceIndex = document.getElementById("invoiceindex").value

    //C·∫≠p nh·∫≠t d·ªØ li·ªáu
    listinvoice[invoiceIndex]={
        idInvoice:document.getElementById("id-invoice").value,
        idCustomer:document.getElementById("id-customer").value,
        nameCustomer:document.getElementById("name-customer").value,
        ngaydat:document.getElementById("date-invoice").value,
        tongtien:document.getElementById("price").value,
        address:document.getElementById("address").value,
        gmail:document.getElementById("gmail").value,
        sdt:document.getElementById("sdt").value,
        giohang:listinvoice[invoiceIndex].giohang,
        status:document.getElementById("select-detail").value
        
    }
console.log(document.getElementById("select-detail").value);
    //ƒê·∫©y d·ªØ li·ªáu l√™n localStorage 
    localStorage.setItem("invoice-Array",JSON.stringify(listinvoice));
    invoiceCustomer()
}


//Th·ªëng k√™
function statictical(){
    thongke = localStorage.getItem("invoice-Array") ? JSON.parse( localStorage.getItem("invoice-Array")) : []
    listProduct = localStorage.getItem("list-product") ? JSON.parse( localStorage.getItem("list-product")) : []

    let nhan = 0
    let vongtay = 0
    let daychuyen = 0
    let bongtai = 0

    thongke.forEach(item => {
        item.giohang.map((i,index)=>{
            if(i.category === "Earring"){
                bongtai += i.price
            }
            if(i.category === "Necklace"){
                daychuyen += i.price
            }
            if(i.category === "Bracelet"){
                vongtay += i.price
            }
            if(i.category === "Ring"){
                nhan += i.price
            }
        })
    });
    
    
}

statictical()
// Hi·ªÉn th·ªã trang c·∫ßn s·ª≠ d·ª•ng
function showcontent() {
    var url = window.location.href;
    var id = url.split('?');
    idd = id[1];
    switch(idd)
    {
        case "sp":
        {
            document.getElementById("container").innerHTML=`
            <div id="t-themsp">
                <div class="themsp-container">
                
                <!-- Form th√™m s·∫£n ph·∫©m  -->
                <div class="form-themsp">
                <!-- Ti√™u ƒë·ªÅ form th√™m s·∫£n ph·∫©m  -->
                <div class="header-tsp" style="position: relative;">
                    <h2>Th√™m s·∫£n ph·∫©m</h2>
                    <a class="" onclick="dongthemsp()" style="position:absolute; right: 10px; top: 5px; font-size: 20px; cursor: pointer;" value="themsanpham">
                        <i class="fas fa-times"></i>
                    </a>
                </div>
                <hr>
                    <form action="" class="themsp">
                        <div class="item-themsp">
                            <p>ID :</p>
                            <input type="text" id="id" class="form-input" >
                            <div class="error-message"></div>
                        </div><br>
                        <div class="item-themsp">
                            <p>Name :</p>
                            <input type="text" id="name" class="form-input" > 
                            <div class="error-message"></div>
                        </div><br>
                        <div class="item-themsp">
                            <p>Img :</p>
                            <input type="file" name="upload" id="upload" class="form-input" onchange="ImagesFileAsURL()">
                            <div class="error-message"></div>
                        </div><br>
                        <div class="item-themsp">
                            <p>Category:</p>
                            <input type="text" id="category" class="form-input" >
                            <div class="error-message"></div>
                        </div><br>
                        
                        <div class="item-themsp">
                            <p>Brand :</p>
                            <input type="text" id="brand" class="form-input" >
                            <div class="error-message"></div>
                        </div><br>
                        <div class="item-themsp">
                            <p>Price :</p>
                            <input type="text" id="price" class="form-input" >
                            <div class="error-message"></div>
                        </div><br> 
                        <!-- Form ·∫©n ƒë·ªÉ h·ª©ng id truy·ªÅn l√™n form ch√≠nh -->
                        <div class="item-receive-index">
                            <input type="hidden" id="receiveindex" >
                        </div><br> 
                        <!-- Button c·ªßa form th√™m s·∫£n ph·∫©m -->
                        <div class="themsp-btn" style="position: relative;">
                            <input id="save" type="button" onclick="Add()" value="Th√™m" >
                            <input id="update" style="display: none;" type="button" onclick="changeProduct(this)" value="S·ª≠a" >
                        </div>
                    </form>
                </div>
                </div>
                                    
            </div>
            <!-- Ti√™u ƒë·ªÅ trang qu·∫£n l√Ω s·∫£n ph·∫©m  -->
            <h2>Danh s√°ch s·∫£n ph·∫©m</h2><br>
            <div class="menu-action">
                <input type="button" name="btn-add" id="add" value="Th√™m s·∫£n ph·∫©m" onclick="mothemsp()" >
            </div><br>
            <br><hr>
            <!-- B·∫£ng ch·ª©a danh s√°ch s·∫£n ph·∫©m  -->
            <table id="table-sp" style="border: 1;" cellpadding="10" cellspace="0">
            </table>`;
            renderProduct();   
            break;  
        }
        case "dh":
        {
            document.getElementById("container").innerHTML=`<div class="ql-donhang">
            <div id="form-invoice">       
                    <div class="qly-invoice">
                    <!-- Ti√™u ƒë·ªÅ form qu·∫£n l√Ω ƒë∆°n h√†ng    -->
                    <div class="form-invoice-header" style="position: relative;">
                        <h2>Chi ti·∫øt ƒë∆°n h√†ng</h2>
                        <a class="" onclick="dong_invoice()" style="position:absolute; right: 10px; top: 5px; font-size: 20px; cursor: pointer;" value="themsanpham">
                            <i class="fas fa-times"></i>
                        </a>
                    </div>
                    <form action="" id="form-detail">
                        <div class="item-invoice">
                            <p>ID Invoice:</p>
                            <input type="text" id="id-invoice" class="form-detail-invoice" readonly>
                        </div><br>
                        <div class="item-invoice">
                            <p>ID Customer:</p>
                            <input type="text" id="id-customer" class="form-detail-invoice" readonly>
                        </div><br>
                        <div class="item-invoice">
                            <p>Name:</p>
                            <input type="text" id="name-customer" class="form-detail-invoice" readonly>
                        </div><br>
                        <div class="item-invoice">
                            <p>Ng√†y  :</p>
                            <input type="text" id="date-invoice" class="form-detail-invoice" readonly> 
                        </div><br>
                        <div class="item-invoice">
                            <p>ƒê·ªãa ch·ªâ:</p>
                            <input type="text" id="address" class="form-detail-invoice" readonly>
                        </div><br>
                        <div class="item-invoice">
                            <p>Gmail:</p>
                            <input type="text" id="gmail" class="form-detail-invoice" readonly>
                        </div><br>
                        <div class="item-invoice">
                            <p>SDT:</p>
                            <input type="text" id="sdt" class="form-detail-invoice" readonly>
                        </div><br> 
                        <div class="item-invoice">
                            <p>ToTal Price:</p>
                            <input type="text" id="price" class="form-detail-invoice" readonly>
                        </div><br> 
                        <div class="item-invoice" id="select-status">
                            <p>Tr·∫°ng th√°i:</p>
                            <select name="select" id="select-detail">
                                <option   value="Ch∆∞a x·ª≠ l√Ω">Ch∆∞a x·ª≠ l√Ω</option>
                                <option  value="ƒê√£ x·ªØ l√Ω">ƒê√£ x·ªØ l√Ω</option>
                            </select>
                        </div><br>
                        <!-- Form ·∫©n ƒë·ªÉ h·ª©ng id truy·ªÅn l√™n form ch√≠nh -->
                        <div class="invoice-receive-index">
                            <input type="hidden" id="invoiceindex" >
                        </div><br> 
                        <table id="table-detail" style="border: 1;" cellpadding="10" cellspace="0">
                        </table>
                        
                        <!-- Button c·ªßa form qu·∫£n l√Ω ƒë∆°n h√†ng  -->
                        <div class="qlinvoice-btn" style="position: relative;">
                            <input id="up-invoice"  type="button" onclick="changeInvoice(this)" value="C·∫≠p nh·∫≠t" >
                        </div>
                    </form>
                    </div>
             </div>
        <div class="menu-dh">
            
        </div>
        <h2>Qu·∫£n l√Ω ƒë∆°n h√†ng</h2>
            <table id="table-qldh" style="border: 1;" cellpadding="10" cellspace="0">
            </table>`;
            invoiceCustomer()
            break;     
        }
        case "usr":
        {
            document.getElementById("container").innerHTML=`<div class="ql-user">
                    
                    
            <div id="form-user">       
                    <div class="qly-user">
                    <!-- Ti√™u ƒë·ªÅ form qu·∫£n l√Ω kh√°ch h√†ng  -->
                    <div class="form-user-header" style="position: relative;">
                        <h2>S·ª≠a th√¥ng tin kh√°ch h√†ng</h2>
                        <a class="" onclick="dong_sua_user()" style="position:absolute; right: 10px; top: 5px; font-size: 20px; cursor: pointer;" value="themsanpham">
                            <i class="fas fa-times"></i>
                        </a>
                    </div>
                    <form action="" >
                        <div class="item-user">
                            <p>ID :</p>
                            <input type="text" id="id-ur" class="form-ur-input" >
                            <div class="error-message"></div>
                        </div><br>
                        <div class="item-user">
                            <p>Username:</p>
                            <input type="text" id="name-ur" class="form-ur-input" > 
                            <div class="error-message"></div>
                        </div><br>
                        <div class="item-user">
                            <p>Gmail :</p>
                            <input type="text" id="gmail" class="form-ur-input" >
                            <div class="error-message"></div>
                        </div><br>
                        <div class="item-user">
                            <p>Phone :</p>
                            <input type="text" id="phone" class="form-ur-input" >
                            <div class="error-message"></div>
                        </div><br>
                        <div class="item-user">
                            <p>Password:</p>
                            <input type="text" id="password" class="form-ur-input" >
                            <div class="error-message"></div>
                        </div><br> 
                        <!-- Form ·∫©n ƒë·ªÉ h·ª©ng id truy·ªÅn l√™n form ch√≠nh -->
                        <div class="invoice-receive-index">
                            <input type="hidden" id="userindex" >
                        </div><br> 
                        <!-- Button c·ªßa form qu·∫£n l√Ω kh√°ch h√†ng  -->
                        <div class="qlur-btn" style="position: relative;">
                            <input id="up-user"  type="button" onclick="changeUser(this)" value="S·ª≠a" >
                        </div>
                    </form>
                    </div>
                    
                </div> 
                <h2>Qu·∫£n l√Ω kh√°ch h√†ng </h2>

            <table id="table-qlur" style="border: 1;" cellpadding="10" cellspace="0">
            </table>
            </div>`;
            userCustomer()  
            break;     
        }
        case "tk":
        {
            document.getElementById("container").innerHTML=`<div div class="menu-tk">
            </div>
            <div class="qly-tk">
                <h2>Th·ªëng k√™</h2>
                <table id="table-tk" style="border: 1;" cellpadding="10" cellspace="0">
                </table>
            </div>
            `;
            break;     
        }
        default:
        {
            document.getElementById("container").innerHTML="";
            break;
        }
    }

}

showcontent()
// window.onload = function (){  
//     showcontent();
//     renderProduct();
//     userCustomer()
// }